

## Geth와 WAVM의 특징 및 차이점

![img1](Images/image1.png)

Geth(go-ethereum)는 이더리움의 핵심 노드 소프트웨어로, Nitro 시스템의
기반이 된다. Nitro는 이 Geth를 중심으로 세 개의 주요 레이어로 구성되어
있다. 가장 아래에 있는 Geth Core 레이어는 이더리움 가상 머신(EVM) 계약
실행과 상태 데이터 구조 유지를 담당한다. Nitro는 이 부분을 라이브러리로
컴파일해 사용한다. 중간 레이어인 ArbOS는 Layer 2에 특화된 기능을
제공하는 맞춤 소프트웨어다. 여기서는 Sequencer 데이터 배치 처리, Layer 1
가스 비용 계산, 수수료 수집, 그리고 크로스체인 브릿지 기능 등을
지원한다. 맨 위의 Node Functionality 레이어는 주로 Geth에서 가져온
코드로 이뤄져 있으며, 클라이언트 연결과 RPC 요청 처리 등 이더리움 호환
블록체인 노드 운영에 필요한 고수준 기능을 제공한다.

이런 구조는 \"geth sandwich\"라고 불린다. Geth 코드가 위아래를 감싸고
있는 모양새를 띠기 때문이다. 상태 전이 함수(STF)는 Geth Core와 ArbOS의
일부로 구성되어 있다. 이 구조 덕분에 Arbitrum은 이더리움의 안정성과
호환성을 유지하면서도 Layer 2의 특화된 기능을 제공할 수 있다. 또한
Geth의 검증된 코드를 재사용함으로써 개발 효율성과 신뢰성을 높일 수 있다.

실용적인 롤업 시스템을 만드는 데 있어 주요 과제는 일반 실행에서의 높은
성능과 결과의 신뢰성 있는 증명 사이의 균형을 맞추는 것이다. 또한
효율적인 분쟁 해결 방법도 필요하다. 이런 과제들을 해결하기 위해
Arbitrum은 실행과 증명을 분리하는 접근법을 택했고, 이를 위해 WAVM이
등장했다.

WAVM은 WebAssembly를 기반으로 하지만, Arbitrum의 요구사항에 맞게 수정된
가상 머신이다. WAVM은 WebAssembly의 일부 기능을 제거하거나 제한하며,
부동 소수점 연산을 소프트웨어 라이브러리로 대체한다. 또한 제어 흐름
구조를 단순화하고 중첩된 제어 흐름을 없앤다. WAVM은 블록체인 환경과
상호작용을 위한 특별한 opcode를 추가하고, 실행 시간을 예측 가능하게
만들며, 효율적인 증명 생성과 검증에 최적화되어 있다.

Geth와 WAVM을 비교해보면 그 차이가 뚜렷하다. Geth는 실제 이더리움
네트워크 운영이 목적이지만, WAVM은 Arbitrum의 상태 전이 함수 증명에
특화되어 있다. Geth는 일반 컴퓨터에서 바로 실행되지만, WAVM은 특수한
증명 시스템 안에서 돌아간다. Geth는 이더리움 노드의 모든 기능을 제공하는
반면, WAVM은 증명에 필요한 제한된 기능만 제공한다. 성능 최적화 면에서
Geth는 일반적인 네트워크 운영에 맞춰져 있고, WAVM은 증명 생성과 검증에
최적화되어 있다. Geth는 플러그인으로 기능을 확장할 수 있지만, WAVM은
증명 목적에 맞게 확장성이 제한되어 있다. 실행 시간의 예측 가능성 면에서,
Geth는 실행 시간이 변할 수 있지만 WAVM은 모든 연산의 실행 시간을 정확히
알 수 있다. 마지막으로 이식성 면에서 Geth는 특정 플랫폼에 최적화될 수
있는 반면, WAVM은 플랫폼에 상관없이 같은 결과를 보장한다.

결론적으로, Geth는 이더리움 노드 운영에 필요한 모든 기능을 제공하는 범용
소프트웨어다. 반면 WAVM은 Arbitrum의 Layer 2 솔루션에서 효율적이고
신뢰할 수 있는 증명 시스템을 구현하기 위해 특별히 설계된, 제한적이고
특화된 실행 환경이다. 이 두 시스템을 함께 사용함으로써 Arbitrum은 높은
성능과 보안성을 동시에 달성할 수 있게 되었다.

Details in this [link](https://docs.arbitrum.io/how-arbitrum-works/inside-arbitrum-nitro)

